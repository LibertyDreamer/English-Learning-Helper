<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart English Explainer</title>
</head>
<body>
  <h1>ðŸ§  Ask About Any Word!</h1>
  <input type="text" id="input" placeholder="Type a word..." style="width: 300px;">
  <button id="ask">Explain</button>
  <p id="output"></p>

  <script type="module">
    import * as webllm from "https://esm.run/@mlc-ai/web-llm";

    async function main() {
      import { MLCEngine } from "@mlc-ai/web-llm";

      // This is a synchronous call that returns immediately
      const engine = new MLCEngine({
        initProgressCallback: initProgressCallback
      });

      // This is an asynchronous call and can take a long time to finish
      await engine.reload(selectedModel);

      document.getElementById('ask').onclick = async () => {
        const inputText = document.getElementById('input').value;
        const outputEl = document.getElementById('output');

        outputEl.innerText = 'Thinking...';

        // Custom prompt for explanation
        const prompt = `Explain the word "${inputText}" simply like a friendly English teacher. Provide a definition and an easy example sentence.`;

        const messages = [
          { role: 'system', content: 'You are a helpful AI assistant who explains English words clearly.' },
          { role: 'user', content: prompt },
        ];

        const reply = await engine.chat.completions.create({ messages });
        outputEl.innerText = reply.choices[0].message.content;
      };
    }

    main();
  </script>
</body>
</html>
